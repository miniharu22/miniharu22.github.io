---
layout : single
title: "Optimal data distribution in FeFET-based computing-in-memory macros"   
categories: 
  - Device Paper Review
tags:
  - FeFET    
toc: true
toc_sticky: true
use_math: true
---



[논문 링크](https://ieeexplore.ieee.org/document/10558611)   

- [IEEE International Symposium on Circuits and Systems (ISCAS)](https://ieeexplore.ieee.org/xpl/conhome/1000089/all-proceedings)   
  - **Date of Conference: 19-22 May 2024**    
  - **Date Added to IEEE Xplore: 02 July 2024**   
  - **Conference Location: Singapore, Singapore**   
  - **DOI: 10.1109/ISCAS58744.2024.10558611**   
  - **Electronic ISBN:979-8-3503-3099-1, Print on Demand(PoD) ISBN:979-8-3503-3100-4**    
  - **Electronic ISSN: 2158-1525, Print on Demand(PoD) ISSN: 0271-4302**    
- **Department of Semiconductor Engineering, Hanyang University, Seoul, Republic of Korea**    
  - [Yonguk Sim](https://ieeexplore.ieee.org/author/892448455401770), [Daewoong Kwon](https://ieeexplore.ieee.org/author/37402105900), [Doo Seok Jeong](https://ieeexplore.ieee.org/author/37086237937)   
- **Division of Materials Science and Engineering, Hanyang University, Seoul, Republic of Korea**   
  - [Choongseok Song](https://ieeexplore.ieee.org/author/906885991366301)    
- **Department of Electronic Engineering, Hanyang University, Seoul, Republic of Korea**   
  - [Eun Chan Park](https://ieeexplore.ieee.org/author/605152447968478)   
- **Department of Electrical and Computer Engineering, Sungkyunkwan University, Suwon, Republic of Korea**   
  - [Jongwook Jeon](https://ieeexplore.ieee.org/author/37090091123)    


## 0. Abstract    

&nbsp;

- **CIM의 장점**   
  - **Comuting-In-Memory(CIM) Macro** 기술은 메모리와 연산 유닛이 동일한 Die에 위치하거나 특히 연산 유닛을 메모리에 통합하는 경우, 다음의 이점을 제공함    
    - DNN의 주요 연산을 가속하는데 있어 전력 소비의 효율성 확보         
    - Multi-bit data를 저장할 수 있는 NVM을 사용함으로써 Data Density를 향상   
    - Idle 상태에서는 전원을 차단함으로싸 대기전력을 0으로 만들 수 있음    
  - 이러한 CIM을 구현할 수 있는 소자로써 FeFET이 유망주로 평가받고 있음    


&nbsp;

- **FeFET-based CIM Macro 연구**    
  - 본 논문에서는 FeFET 기반의 Mixed-signal CIM Macro를 설계, 한 번의 cycle에 접근되는 Sub-array의 size($$n_M$$x$$n_w$$)에 따른 최적의 성능을 확인함    
    - 여기서 $$n_w$$는 하나의 $$w$$-bit weight를 표현하는 FeFET의 개수를 의미    
  - 또한 시뮬레이션을 통해 weight resolution($$w$$)에 따라 서로 다른 병렬성($$n_M^*$$)을 갖는 최적의 Sub-array 구성이 $$n_M^*$$ x ($$w$$/2)임을 확인함   
    - 이는 8bit weight를 기준으로 weight-splitting을 진행하지 않은 경우($$n_w$$ = 1) 대비, 약 29배의 성능 향상을 보임     

&nbsp;

## 1. Introduction    

&nbsp;

- **DNN의 문제점과 GPU의 한계**   
  - 최근 Deep Learning에서 핵심적으로 사용되는 DNN의 경우, 모델의 Depth와 size가 증가하면서 Parameter의 수와 연산량이 증가되고 있음    
    - 특히, 연산 부하의 경우 **Feature과 Kernel의 weight 곱셈과 그 결과의 누적합산, 즉 Multiplu-Accumulate(MAC) 연산**에 기인함   
  - 최근 DNN의 발전은 **Single-Instructuon Mutiple Data(SIMD) 방식의 GPU**를 기반으로 하지만, GPU는 높은 전력 소모량이라는 고질적인 단점을 가지고 있음   

&nbsp;

- **CIM의 장점**   
  - 상술한 GPU의 대안으로 저전력으로 DL 연산을 가속시키기 위한 하드웨어들이 제시되고 있으며, 그중에는 NPU와 CIM Macro가 있는데 해당 HW는 다소의 범용성을 포기하는 대신, 연산 효율성을 극대화하는 것을 목표로 함   
  - **CIM**은 **동일한 Die에 메모리와 연산 유닛을 집적**시킴으로써, 기존 가속기에 비해 **Memory-access에 필요한 전력 소모량을 크게 줄일 수 있음**   
    - **특히, CIM은 Analog MAC 연산을 수행하기 때문에 Processing domain을 Memory domain에 통합시킬 수 있고 이는 Digital CIM Macro의 병렬성 한계를 보완함**      

&nbsp;

> **Digitacl vs Aanlog CIM**   
>   - Digital CIM의 경우, SRAM과 같은 Memory unit에 저장된 data를 디지털 방식으로 읽어와 MAC 연산을 수행    
>       - 보통 디지털 방식에서는 WL이나 BL에 대해 Serial Access를 하는 경우가 많기 때문에 병렬 처리에 적합하지 않음    
>       - 결과적으로 병렬 MAC 연산의 범위가 제한적이며, 고속 연산을 가능케하기 위해서는 대면적의 디지털 회로나 많은 전력 소비가 요구됨    
>   - 반대로 본 논문에서 제시한 Analog CIM의 경우, FeFET과 같은 Synaptic Array에서 출력된 전류를 물리적으로 합산함으로써 연산을 수행함    
>       - 복잡한 디지털 회로 없이도 메모리 유닛 내에서 MAC 연산을 수행하기 때문에 별도의 Data 이동이 요구되지 않으며 이를 통해 저전력의 병렬 처리가 가능함    

&nbsp;

- **Analog CIM 최적화의 필요성**   
  - Analog CIM에서 Multi-bit state를 갖는 Resistance-based NVM의 경우, 병렬 전류 합산을 통해 Parallel Analog MAC 연산을 가능케 함    
  - 다만, Analog CIM은 데이터의 손실 없이 Multi-bit state와 병렬성을 구현하기 위해 고해상도의 ADC를 요구하며, 이는 과도한 면적 및 전력 소비를 일으킴    
  - 이를 고려하면, CIM Macro를 설계할 때는 각 Memory cell의 최적의 State 개수와 동작 상의 병렬성을 확인하는 것이 요구됨    

&nbsp;

> **High-Resolution ADC**   
>   - 직접 전류를 누적합산함으로써 Data를 처리하는 Analog CIM의 경우, 미세한 전류의 차이로 Multi-bit state를 표현할 수 있어야 함    
>   - 이를 위해서는 넓은 Dynamic range 내에서 작은 전류 차이를 정밀하게 잡아내야 하므로 고해상도의 ADC가 요구됨    
>       - 만약, 저해상도의 ADC를 사용하게 될 경우, Quantization Error가 발생할 수 잇는데, 이는 신경망의 Accuracy에 악영향을 줄 가능성이 높음    


&nbsp;

- **CIM Marco 연구**    
  - 본 논문에서는 Muti-bit state를 표현할 수 있는 FeFET 기반의 Mixed-signal CIM Macro를 제안하였으며, FeFET Array 상에서 전력과 면적의 효율을 극대화할 수 있는 최적의 weight-data 분배 방식을 분석함   
  - 논문에서 제시한 CIM Macro는 HZO-based FeFET의 실험 데이터를 활용하는 동시에, Cadence GPDK 45nm 공정 기술을 기반으로 Peri 회로를 시뮬레이션, 1V의 Supply voltage 조건에서 평가를 수행함    

&nbsp;

## 2. Architecture of FeFET-based CIM Macros    
### 2-1. FeFET-CIM Macro Architecture    

&nbsp;

<div align="center">
  <img src="/assets/images/Ferro/31.png" width="60%" height="60%" alt=""/>
  <p><em></em></p>
</div>

&nbsp;

- **FeFET-CIM Macro 아키텍쳐**   
  - 본 논문에서 제시한 FeFET-based CIM Macro의 아키텍쳐는 Fig.1에서 확인 가능하며, 동작 방식은 다음과 같으며 **해당 방식은 연산의 신뢰성을 향상시키고, ADC의 전력 및 면적 측면에서의 overhead를 개선함**   
    - **Integer format 기반의 Mixed-signal 방식의 MAC 연산을 지원**    
    - **부분(Partial) 연산은 병렬로 access되는 FeFET들의 전류의 합산에 기반**    
    - **부분 연산의 최종 결과를 Digital Processing**     

&nbsp;

- **FeFET-CIM Macro의 동작 과정**   
  - FeFET-CIM Macro의 Memory domain은 Multi-bit data를 저장하는 FeFET들로 구성된 $$M$$x$$N$$ Array를 포함함    
  - **각 $$w$$bit의 Integer weight는 $$n_w$$개의 FeFET에 나누어 저장됨**   
    - **즉, 각 FeFET은 $$w$$/$$n_w$$bit 분량의 Partial weight를 저장함**  
  - $$\alpha$$bit Input activation 값들은 IA Driver를 통해 Bit-serial 방식으로 인가되며, 이를 위해서는 $$\alpha$$개의 Clk cycle이 필요함    
    - IA Driver는 `1` 신호를 받으면 FeFET의 WL을 Pull-up시키는 $$M$$개의 DAC Array로 구성됨    
  - **한 cycle에서 $$n_M$$x$$n_w$$ size의 FeFET Sub-array는 $$n_w$$개의 BL current를 구동시키며, 이는 같은 BL을 공유하는 $$n_M$$개의 FeFET 전류를 합산한 값에 해당**    
    - 이를 위해 $$n_w$$개의 ADC를 배치되며, 해당 모듈에서 나온 Partial result는 Shift-and-ADD(S&A) 유닛에서 처리됨     
    - 각 ADC[$$i$$]의 출력은 $$w$$/$$n_w$$($$i$$-1)bit만큼 shift된 후 합산됨    
  - 위 과정을 $$\alpha$$개의 cycle동안 반복함으로써 결과적으로 Input Activation 값 IA[$$n_M$$:1]과 weight $$W$$[$$n_M$$:1] 사이의 Dot Product 연산이 마무리됨    

&nbsp;

### 2-2. FeFET Array    

&nbsp;

<div align="center">
  <img src="/assets/images/Ferro/32.png" width="60%" height="60%" alt=""/>
  <p><em></em></p>
</div>

&nbsp;

- **FeFET의 시냅스 특성**   
  - 본 논문에서 고려된 FeFET은 기존의 MOSFET과 동일한 구조를 가지고 있지만, TiN Gate Metal과 Si Channel 사이에 6nm 두께의 HZO 강유전층과 1nm 두께의 SiOx가 삽입됨(Fig.2(a) 참고)     
  - 강유전층의 분극 스위칭을 통해 FeFET의 $$V_{th}$$를 변화시킬 수 있고, 이를 통해 PRG-state와 ERS-state를 구분할 수 있음(Fig.2(b) 참고)    
  - 또한, [ISPP](https://miniharu22.github.io/device%20paper%20review/neuro0/) 기법을 사용하면, PRG state와 ERS state 사이에서 Multi-bit state를 조절하여 저장할 수 있음(Fig.2(c) 참고)    
    - 이를 통해 각 FeFET은 Multi-bit weight를 저장하는 Memory cell로 동작 가능하며, 저장된 Multi-bit state는 1,000s까지 비휘발성 상태로 유지가 가능함(Fig.2(d) 참고)   

&nbsp;

- **FeFET Array의 동작**   
  - $$n_M$$x$$n_w$$ size의 Sub-array 내의 FeFET들은 각각 $$w$$/$$n_w$$bit의 Partial weight를 저장하고 있음   
  - 또한 FeFET은 동시에 access되는데, 이때 생성된 $$n_w$$개의 BL current는 각각 $$n_M$$개의 Channel current의 합으로 구성됨    
    - 이 과정에서 Bit Line은 Pull-up, Source Line은 Pull-down됨으로써 전류의 흐름을 유도시킴    
  - 각 FeFET의 전력 소비량과 면적 점유율, 그리고 Read Delay time은 다음과 같음    
    - 소비 전력($$P_{\text{FeFET}}$$) ($$V_{DD}$$ = 0.1V)      
      - Off state: 200pW   
      - On state: 200nW        
    - 점유 면적($$A_{\text{FeFET}}$$): 3μm²   
    - Read Delay time($$T_{\text{read}}$$): 10ns 이하   

&nbsp;

### 2-3. SAR-ADC    

&nbsp;

<div align="center">
  <img src="/assets/images/Ferro/33.png" width="60%" height="60%" alt=""/>
  <p><em></em></p>
</div>

&nbsp;

- **SAR-ADC**   
  - 본 논문에서는 Successive-Approximation ADC, 즉 **SAR-ADC 모듈**을 사용하는데 해당 방식은 **Analog 신호를 Digital 신호로 변환하기 위해, Reference 신호와 Analog 신호를 반복적으로 비교하며 변환을 수행함**   
    - Reference 신호는 Capacitor 기반의 DAC와 SAR Logic을 통해 생성됨    
    - SAR-DAC는 Binary-weighted Capacitive DAC, SAR Logic, 비교기(Comparator)로 구성    
  -     